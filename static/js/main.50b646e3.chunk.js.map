{"version":3,"sources":["components/Status.tsx","components/Card.tsx","common/TextField.tsx","components/FileInput.tsx","common/Button.tsx","service/utils.ts","main/FirstStep.tsx","App.text.ts","service/processing.ts","main/SecondStep.tsx","service/scraping.ts","main/ThirdStep.tsx","main/FourthStep.tsx","App.tsx","reportWebVitals.ts","common/AlertTemplate.tsx","index.tsx"],"names":["useStyles","makeStyles","root","position","right","top","Status","value","successLabel","failureLabel","classes","color","variant","label","Chip","className","size","minWidth","maxWidth","margin","display","title","content","actions","padding","Card","text","completed","CardContent","undefined","Typography","component","CardActions","CustomTextField","withStyles","MUITextField","TextField","onChange","multiline","rows","FileInput","file","setFile","fileInput","useRef","name","type","selectedFile","current","files","ref","hidden","Button","importance","children","other","copyToClipboard","alert","successMessage","INPUT_ID","button","$","click","input","val","append","focus","select","document","execCommand","success","error","currentScroll","documentElement","scrollTop","remove","fillWithZeros","length","result","readFile","a","Promise","resolve","reader","FileReader","onload","event","target","readAsBinaryString","FirstStep","tableData","setTableData","useAlert","useState","rawCsv","setRawCsv","Fragment","e","onClick","contentsPromise","then","data","sheet","readXLSX","XLSXUtils","sheet_to_csv","Sheets","SheetNames","readCsv","contents","enteredRegex","exportedRegex","numberFieldPresent","lines","split","map","line","trim","significantLines","filter","test","reduce","res","rawData","child","push","days","meaninglessColumnCount","absentDates","array","element","ignoreCase","processedArray","toLowerCase","index","indexOf","findAllOccurrences","date","findAbsentDates","absentData","i","forEach","day","structureTableData","SecondStep","parsedData","setParsedData","scrapedData","setScrappedData","JSON","parse","ThirdStep","successfulMatches","setSuccessfulMatches","failedMatches","setFailedMatches","join","childrenIds","tableChildren","childrenNames","Object","keys","scrapedSecondNames","match","tableSecondNames","matches","failures","matchedIds","Map","id","set","matchData","FourthStep","absentIds","get","setAbsentFunction","groupId","dou_id","month","year","lastDay","outerStyles","innerStyles","promises","start","end","range","dayStr","monthStr","dateStr","getSetAbsentFunction","Page","styled","div","StepsContainer","Title","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","style","width","AlertTemplate","message","options","Alert","severity","AlertTitle","alertOptions","positions","TOP_CENTER","timeout","ReactDOM","render","StrictMode","template","getElementById"],"mappings":"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","file":"static/js/main.50b646e3.chunk.js","sourcesContent":["import React from \"react\";\nimport {Chip, makeStyles} from \"@material-ui/core\";\n\ninterface Props {\n    value: boolean,\n    successLabel: string,\n    failureLabel: string\n}\n\nconst useStyles = makeStyles({\n    root: {\n        position: 'absolute',\n        right: '16px',\n        top: '20px'\n    }\n})\n\nconst Status = ({value, successLabel, failureLabel}: Props) => {\n    const classes = useStyles()\n    const color = value ? 'primary' : 'secondary'\n    const variant = value ? 'default' : 'outlined'\n    const label = value ? successLabel : failureLabel\n\n    return (\n        <Chip className={classes.root} variant={variant} size='small' color={color} label={label}/>\n    )\n}\n\nexport default Status","import React from \"react\";\nimport {Card as MUICard, CardActions, CardContent, makeStyles, Typography} from \"@material-ui/core\";\nimport Status from \"./Status\";\n\ninterface Props {\n    title: string,\n    text: string,\n    completed?: boolean,\n    actions?: any,\n    content?: any\n}\n\nconst useStyles = makeStyles({\n    root: {\n        position: 'relative',\n        minWidth: '300px',\n        maxWidth: '420px',\n        margin: '8px',\n        display: 'flex',\n        'flex-direction': 'column'\n    },\n    title: {\n        'margin-bottom': '4px'\n    },\n    content: {\n        display: 'flex',\n        'flex-direction': 'column'\n    },\n    actions: {\n        padding: '0 16px 16px 16px',\n        'justify-content': 'flex-end'\n    }\n})\n\nconst Card = ({title, text, completed, actions, content}: Props) => {\n    const classes = useStyles()\n\n    return (\n        <MUICard className={classes.root}>\n            <CardContent className={classes.content}>\n                {\n                    completed !== undefined &&\n                    <Status value={completed!} successLabel='Completed' failureLabel='Not completed'/>\n                }\n\n                <Typography variant='h6' className={classes.title}>{title}</Typography>\n                <Typography variant='body2' color=\"textSecondary\" component=\"p\">{text}</Typography>\n\n                {content}\n            </CardContent>\n            <CardActions className={classes.actions}>\n                {actions}\n            </CardActions>\n        </MUICard>\n    )\n}\n\nexport default Card","import React, {ChangeEvent} from \"react\";\nimport {TextField as MUITextField} from \"@material-ui/core\";\nimport {withStyles} from \"@material-ui/core/styles\";\n\ninterface Props {\n    label: string,\n    value: string,\n    onChange: (event: ChangeEvent<HTMLTextAreaElement>) => void\n}\n\nexport const CustomTextField = withStyles({\n    root: {\n        'margin-top': '12px'\n    }\n})(MUITextField)\n\nconst TextField = ({label, value, onChange}: Props) => {\n    return (\n        <CustomTextField label={label}\n                         multiline\n                         rows={4}\n                         variant='outlined'\n                         value={value}\n                         onChange={onChange}/>\n    )\n}\n\nexport default TextField","import React, {useRef} from \"react\";\nimport {Button, makeStyles} from \"@material-ui/core\";\n\ninterface Props {\n    file: File | null,\n    setFile: (file: File | null) => void\n}\n\nconst useStyles = makeStyles({\n    root: {\n        'margin-top': '12px'\n    }\n})\n\nconst FileInput = ({file, setFile}: Props) => {\n    const fileInput = useRef<HTMLInputElement>(null)\n\n    const onFileSet = () => {\n        const selectedFile = fileInput.current!.files![0]\n        if (selectedFile) {\n            setFile(selectedFile)\n        } else {\n            setFile(null)\n        }\n    }\n\n    const classes = useStyles()\n\n    return (\n        <Button className={classes.root} variant='outlined' color='secondary' component='label'>\n            {!!file ? file.name : 'Upload table'}\n            <input type='file' onChange={onFileSet} ref={fileInput} hidden/>\n        </Button>\n    )\n\n\n}\n\nexport default FileInput","import React from \"react\";\nimport {Button as MUIButton} from \"@material-ui/core\";\n\ninterface Props {\n    importance: 'primary' | 'secondary',\n    type?: 'button' | 'reset' | 'submit',\n    onClick: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void\n    children?: any\n}\n\nconst Button = ({importance, children, ...other}: Props) => {\n    const variant = importance === 'primary' ? 'contained' : importance === 'secondary' ? 'outlined' : 'text'\n\n    return (\n        <MUIButton variant={variant} color='primary' {...other}>{children}</MUIButton>\n    )\n}\n\nexport default Button\n","import $ from 'jquery'\nimport {AlertManager} from \"react-alert\";\n\nexport const copyToClipboard = (value: string, alert: AlertManager, successMessage?: string) => {\n    const INPUT_ID = 'very_long_input_id'\n    const button = $('<button>!</button>')\n    button.click(() => {\n        const input = $(`<textarea id=\"${INPUT_ID}\">`)\n        input.val(value)\n\n        $('body').append(input)\n        input.focus()\n        input.select()\n\n        const res = document.execCommand('copy')\n        if (res) {\n            alert.success(successMessage || 'Everything is copied successfully')\n        } else {\n            alert.error('Something is very wrong')\n        }\n\n    })\n    const currentScroll = document.documentElement.scrollTop\n    button.click()\n\n    $(`#${INPUT_ID}`).remove()\n    document.documentElement.scrollTop = currentScroll\n}\n\nexport const fillWithZeros = (value: string, length: number): string => {\n    let result = value\n    while (result.length < length) {\n        result = '0' + result\n    }\n\n    return result\n}\n\nexport const readFile = async (file: File): Promise<string | ArrayBuffer> => {\n    return new Promise((resolve) => {\n        const reader = new FileReader()\n        reader.onload = (event) => {\n            resolve(event.target!.result!)\n        }\n        reader.readAsBinaryString(file)\n    })\n}\n\nexport const range = (start: number, end: number): number[] => {\n    const result = []\n    for (let i = start; i < end; ++i) {\n        result.push(i)\n    }\n\n    return result\n}","import React, {ChangeEvent, useState} from \"react\";\nimport {firstStepText} from \"../App.text\";\nimport Card from \"../components/Card\";\nimport {structureTableData} from \"../service/processing\";\nimport TextField from \"../common/TextField\";\nimport FileInput from \"../components/FileInput\";\nimport Button from \"../common/Button\";\nimport {readFile} from \"../service/utils\";\nimport {read as readXLSX, utils as XLSXUtils} from 'xlsx'\nimport {useAlert} from \"react-alert\";\n\ninterface Props {\n    tableData: any,\n    setTableData: (value: React.SetStateAction<any>) => void,\n}\n\nconst FirstStep = ({tableData, setTableData}: Props) => {\n    const alert = useAlert()\n\n    const [file, setFile] = useState<File | null>(null)\n    const [rawCsv, setRawCsv] = useState('')\n\n    const onRawCsvSet = (e: ChangeEvent<HTMLTextAreaElement>) => {\n        setRawCsv(e.target.value)\n    }\n\n    const readCsv = (file: File): Promise<string> => {\n        return readFile(file).then(data => {\n            const sheet = readXLSX(data, {\n                type: 'binary'\n            })\n            return XLSXUtils.sheet_to_csv(sheet.Sheets[sheet.SheetNames[0]])\n        })\n    }\n\n    const onSubmit = () => {\n        if (!file && rawCsv === '') {\n            alert.error('Select a workbook file for conversion or fill the text area with the .csv data. Why the fuck didn\\'t you do this?')\n            return\n        }\n\n        let contentsPromise = !!file ? readCsv(file) : Promise.resolve(rawCsv)\n        contentsPromise.then(contents => setTableData(structureTableData(contents)))\n    }\n\n    return (\n        <Card title='Step 1' text={firstStepText} completed={!!tableData}\n              content={\n                  !tableData &&\n                  <React.Fragment>\n                      <FileInput file={file} setFile={setFile}/>\n                      <TextField label='.csv contents'\n                                 value={rawCsv}\n                                 onChange={onRawCsvSet}/>\n                  </React.Fragment>\n              }\n              actions={\n                  !tableData &&\n                  <Button importance='primary' type='submit' onClick={onSubmit}>Submit</Button>\n              }/>\n    )\n}\n\nexport default FirstStep","export const firstStepText = 'Select a table file to use as a data source or copy and paste the .csv file contents into the text area and then press the \"Submit\" button to read the children data.'\nexport const secondStepText = 'Press the \"Get Function\" button to copy the code to your clipboard. Paste and execute the code on the page with the children list to get the data.'\nexport const thirdStepText = 'Map children from the .csv to the scrapped children from the web page.'\nexport const fourthStepText = 'Press the \"Get Function\" button to copy the code to your clipboard. Paste and execute the code on the page with the children list to set the data from the .csv.'","const findAllOccurrences = (array: string[], element: string, ignoreCase: boolean) => {\n    const processedArray = ignoreCase ? array.map(data => data.toLowerCase()) : array.slice()\n    const result = []\n    let index = 0\n\n    while (true) {\n        index = processedArray.indexOf(element, index + 1)\n        if (index === -1) {\n            break\n        } else {\n            result.push(index)\n        }\n    }\n\n    return result\n}\n\nconst findAbsentDates = (data: string[], numberFieldPresent: boolean) => {\n    const absentMarker = 'нн'\n    const meaninglessColumnCount = numberFieldPresent ? 3 : 2\n    const absentDates = findAllOccurrences(data, absentMarker, true)\n\n    return absentDates.map(date => date - meaninglessColumnCount)\n}\n\nexport const structureTableData = (data: string) => {\n    const enteredRegex = /^[0-9]+,[а-яА-я]+ [а-яА-я]+,.*$/\n    const exportedRegex = /^[а-яА-я]+ [а-яА-я]\\. [а-яА-я]\\.,.*$/\n    let numberFieldPresent = true\n\n    const lines = data.split('\\n').map(line => line.trim())\n    let significantLines = lines.filter(line => enteredRegex.test(line))\n    if (significantLines.length === 0) {\n        significantLines = lines.filter(line => exportedRegex.test(line))\n        numberFieldPresent = false\n    }\n\n    const {children, days} = significantLines.reduce((res: any, line: string) => {\n        const rawData = line.split(',')\n        const child = rawData[numberFieldPresent ? 1 : 0]\n        res.children.push(child)\n        res.days.push(findAbsentDates(rawData, numberFieldPresent))\n\n        return res\n    }, {children: [], days: []})\n\n    const absentData: any = {}\n    for (let i = 0; i < children.length; ++i) {\n        const child = children[i]\n        days[i].forEach((day: number) => {\n            if (!absentData[day]) {\n                absentData[day] = []\n            }\n\n            absentData[day].push(child)\n        })\n    }\n\n    return {children, absentData}\n}\n\nexport const matchData = (childrenIds: { [key: string]: string }, tableChildren: string[]) => {\n    const childrenNames = Object.keys(childrenIds)\n    const scrapedSecondNames = childrenNames.map(name => {\n        const match = name.match(/^(.+) .\\. .\\._.*$/)\n        if (match && match[1]) {\n            return match[1]\n        }\n        return name\n    })\n\n    const tableSecondNames = tableChildren.map(name => name.split(' ')[0])\n\n    const matches = tableSecondNames.map(name => {\n        const index = scrapedSecondNames.indexOf(name)\n        if (index === -1) {\n            return null\n        }\n\n        scrapedSecondNames[index] = ''\n        return childrenIds[childrenNames[index]]\n    })\n\n    const failures = []\n    const matchedIds = new Map<string, string>()\n    for (let i = 0; i < matches.length; ++i) {\n        const name = tableChildren[i]\n        const id = matches[i]\n        if (id) {\n            matchedIds.set(name, id)\n        } else {\n            failures.push(name)\n        }\n\n    }\n\n    return {failures, matchedIds}\n}","import React, {ChangeEvent, useState} from \"react\";\nimport {secondStepText} from \"../App.text\";\nimport Card from \"../components/Card\";\nimport {copyToClipboard} from \"../service/utils\";\nimport {scrapChildrenFunction} from \"../service/scraping\";\nimport Button from \"../common/Button\";\nimport TextField from \"../common/TextField\";\nimport {useAlert} from \"react-alert\";\n\ninterface Props {\n    parsedData: any,\n    setParsedData: (value: React.SetStateAction<any>) => void,\n}\n\nconst SecondStep = ({parsedData, setParsedData}: Props) => {\n    const alert = useAlert()\n\n    const [scrapedData, setScrappedData] = useState('')\n\n    const onScrappedDataSet = (e: ChangeEvent<HTMLTextAreaElement>) => {\n        setScrappedData(e.target.value)\n    }\n\n    const getFunction = () => {\n        copyToClipboard(scrapChildrenFunction, alert, 'The function was copied successfully.')\n    }\n\n    const onSubmit = () => {\n        if (scrapedData === '') {\n            alert.error('The area you should have filled with the scrapped children data is empty. The fuck?')\n            return\n        }\n\n        setParsedData(JSON.parse(scrapedData))\n    }\n\n    return (\n        <Card title='Step 2' text={secondStepText} completed={!!parsedData}\n              content={\n                  !parsedData &&\n                  <TextField value={scrapedData} label='Function result' onChange={onScrappedDataSet}/>\n              }\n              actions={\n                  !parsedData &&\n                  <React.Fragment>\n                      <Button importance='secondary' type=\"button\" onClick={getFunction}>Get Function</Button>\n                      <Button importance='primary' type=\"submit\" onClick={onSubmit}>Submit</Button>\n                  </React.Fragment>\n              }/>\n    )\n}\n\nexport default SecondStep","import {fillWithZeros, range} from \"./utils\";\n\nexport const scrapChildrenFunction = `(function() {\n    const children = Array.from($('.j_tr')).slice(1, -1).map(row => {\n        const cells = Array.from($(row).children('td'))\n        const name = cells[1].innerText\n        const id = cells[2].getAttribute('child')\n\n        return {id, name}\n    }).reduce((res, child) => {\n        res[child.name + '_' + child.id] = child.id\n        return res\n    }, {})\n    \n    const groupId = $('#id_group')[0].value\n    const dou_id = $('[name=\"dou_id\"]')[0].value\n    const month = $('#id_period')[0].value\n    const year = $('#id_year')[0].value\n    const lastDay = $('#table tbody tr').first().children().length - 4\n    \n    const data = {children, groupId, dou_id, month, year, lastDay}\n\n    const copyToClipboard = (value) => {\n        const button = $('<button>!</button>')\n        button.click(() => {\n            const input = $('<input id=\"ultra_input\">')\n            input.val(value)\n\n            $('body').append(input)\n            input.focus()\n            input.select()\n\n            const res = document.execCommand('copy')\n            if (res) {\n                alert('Names and ids were copied successfully')\n            } else {\n                alert('Something went very wrong')\n            }\n\n        })\n        button.click()\n\n        $('#ultra_input').remove()\n    }\n    \n    copyToClipboard(JSON.stringify(data))\n})()`\n\nconst fixDayFunction = `\nfunction fixDay(dou_id, childrenIds, groupId, dateStr) {\n    return new Promise(resolve => {\n        $.post('/cabinet/children/visit/save/?dou_id=' + dou_id, {\n            children: childrenIds,\n            group: groupId,\n            date: dateStr\n        }, (data) => {\n            resolve(data)\n        });\n    })\n}\n`\n\nexport const getSetAbsentFunction = (data: Map<string, string[]>, groupId: string, dou_id: string, month: string, year: string, lastDay: number) => {\n    const outerStyles = `position: fixed;\n                        background: #FFC0CBaa;\n                        top: 0;\n                        bottom: 0;\n                        left: 0;\n                        right: 0;\n                        display: flex;\n                        justify-content: center;\n                        align-items: center;`.split('\\n').map(a => a.trim()).join('')\n\n    const innerStyles = `color: #fff;\n                        font-weight: bold;\n                        font-size: 26px;\n                        background: #3333;\n                        border-radius: 8px;\n                        padding: 4px;`.split('\\n').map(a => a.trim()).join('')\n\n    const promises = range(0, lastDay + 1).map(day => {\n        const dayStr = fillWithZeros('' + day, 2)\n        const monthStr = fillWithZeros(month, 2)\n        const dateStr = `${dayStr}.${monthStr}.${year}`\n\n        const childrenIds = data.get('' + day) || []\n\n        return `fixDay('${dou_id}', '${childrenIds.join('|')}', '${groupId}', '${dateStr}')`\n    }).join(',\\n')\n\n    return `\n    (function() {\n        let completed = ${lastDay}\n        if (completed > 0) {\n            ${fixDayFunction}\n        \n            let cover = $('<div style=\"${outerStyles}\"><div style=\"${innerStyles}\">Ща, ща, погоди.</div></div>')\n            $('body').append(cover)\n            \n            Promise.all([${promises}]).then(() => {\n                location.reload()\n            })\n        }\n    })()\n    `\n}","import React, {useState} from \"react\";\nimport {thirdStepText} from \"../App.text\";\nimport Card from \"../components/Card\";\nimport {matchData} from \"../service/processing\";\nimport Button from \"../common/Button\";\nimport {Typography} from \"@material-ui/core\";\nimport {useAlert} from \"react-alert\";\n\ninterface Props {\n    parsedData: any,\n    tableData: any,\n    successfulMatches: Map<string, string> | null,\n    setSuccessfulMatches: (value: React.SetStateAction<Map<string, string> | null>) => void,\n}\n\nconst ThirdStep = ({parsedData, tableData, successfulMatches, setSuccessfulMatches,}: Props) => {\n    const alert = useAlert()\n\n    const [failedMatches, setFailedMatches] = useState<string[]>([])\n\n    const onSubmit = () => {\n        if (!parsedData || !tableData) {\n            alert.error('You should complete the first two steps before you are able to do that. The fuck are you thinking?')\n            return\n        }\n\n        const {failures, matchedIds} = matchData(parsedData.children, tableData.children)\n        setSuccessfulMatches(matchedIds)\n        setFailedMatches(failures)\n    }\n\n    return (\n        <Card title='Step 3' text={thirdStepText} completed={!!successfulMatches}\n              content={\n                  !!failedMatches.length &&\n                  <React.Fragment>\n                      <Typography variant='h6'>Failed to match</Typography>\n                      <Typography variant='body2' color=\"textSecondary\"\n                                  component=\"p\">{failedMatches.join('\\n')}</Typography>\n                  </React.Fragment>\n              }\n              actions={\n                  !successfulMatches &&\n                  <Button importance='primary' type=\"submit\" onClick={onSubmit}>Submit</Button>\n              }/>\n    )\n}\n\nexport default ThirdStep","import React from \"react\";\nimport {fourthStepText} from \"../App.text\";\nimport Card from \"../components/Card\";\nimport {getSetAbsentFunction} from \"../service/scraping\";\nimport {copyToClipboard} from \"../service/utils\";\nimport Button from \"../common/Button\";\nimport {useAlert} from \"react-alert\";\n\ninterface Props {\n    parsedData: any,\n    tableData: any,\n    successfulMatches: Map<string, string> | null,\n}\n\nconst FourthStep = ({parsedData, tableData, successfulMatches}: Props) => {\n    const alert = useAlert()\n\n    const getFunction = () => {\n        if (!successfulMatches) {\n            alert.error('No matched data. Did you do the steps 1-3? The fuck are you thinking?')\n            return\n        }\n\n        const absentIds = new Map<string, string[]>()\n        for (const day in tableData.absentData) {\n            absentIds.set(day, tableData.absentData[day]\n                .map((name: string) => successfulMatches.get(name))\n                .filter((e: any) => !!e)\n            )\n        }\n\n        const setAbsentFunction = getSetAbsentFunction(absentIds, parsedData.groupId, parsedData.dou_id,\n            parsedData.month, parsedData.year, parsedData.lastDay)\n        copyToClipboard(setAbsentFunction, alert, 'The function was copied successfully.')\n    }\n\n    return (\n        <Card title='Step 4' text={fourthStepText}\n              actions={\n                  <Button importance='primary' type=\"button\" onClick={getFunction}>Get Function</Button>\n              }/>\n    )\n}\n\nexport default FourthStep","import React, {useState} from 'react';\nimport styled from \"styled-components\";\nimport FirstStep from \"./main/FirstStep\";\nimport SecondStep from \"./main/SecondStep\";\nimport ThirdStep from \"./main/ThirdStep\";\nimport FourthStep from \"./main/FourthStep\";\n\nconst Page = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  margin: 0 auto;\n`\n\nconst StepsContainer = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: start;\n  flex-wrap: wrap;\n`\n\nconst Title = styled.div`\n  font-size: 32px;\n  font-weight: bold;\n  margin: 20px auto;\n`\n\nconst App = () => {\n    const [tableData, setTableData] = useState<any>(null)\n    const [parsedData, setParsedData] = useState<any>(null)\n    const [successfulMatches, setSuccessfulMatches] = useState<Map<string, string> | null>(null)\n\n    return (\n        <Page>\n            <Title>Ultra Helper</Title>\n\n            <StepsContainer>\n                <FirstStep tableData={tableData} setTableData={setTableData}/>\n\n                <SecondStep parsedData={parsedData} setParsedData={setParsedData}/>\n\n                <ThirdStep parsedData={parsedData} tableData={tableData}\n                           successfulMatches={successfulMatches} setSuccessfulMatches={setSuccessfulMatches}/>\n\n                <FourthStep parsedData={parsedData} tableData={tableData} successfulMatches={successfulMatches}/>\n            </StepsContainer>\n\n        </Page>\n    )\n}\n\nexport default App\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import {AlertComponentPropsWithStyle} from \"react-alert\";\nimport {Alert, AlertTitle} from \"@material-ui/lab\";\nimport React from \"react\";\n\nconst style = {\n    width: '500px',\n    margin: '4px',\n    'maxWidth': '100vw'\n}\n\nconst AlertTemplate = ({message, options}: AlertComponentPropsWithStyle) => {\n    const title = options.type === 'error' ? 'Error' :\n        options.type === 'success' ? 'Success' : 'Info'\n\n    return (\n        <Alert style={{...style}} severity={options.type}>\n            <AlertTitle>{title}</AlertTitle>\n            {message}\n        </Alert>\n    )\n}\n\nexport default AlertTemplate","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport {positions, Provider as AlertProvider} from \"react-alert\";\nimport AlertTemplate from \"./common/AlertTemplate\";\n\nconst alertOptions = {\n    position: positions.TOP_CENTER,\n    timeout: 5000\n}\n\nReactDOM.render(\n    <React.StrictMode>\n        {\n            <AlertProvider template={AlertTemplate} {...alertOptions}>\n                <App/>\n            </AlertProvider>\n        }\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}