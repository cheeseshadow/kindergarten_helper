(this["webpackJsonpkindergarten-helper"]=this["webpackJsonpkindergarten-helper"]||[]).push([[0],{19:function(e,n,t){},22:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t(0),i=t.n(r),o=t(10),a=t.n(o),u=(t(19),t(4)),d=t(2),s=t(3);function l(){var e=Object(d.a)(["\n  resize: none;\n  width: 100%;\n  border: solid #333 1px;\n  border-radius: 4px;\n  padding: 4px;\n  height: 120px;\n  margin: 12px 0;\n"]);return l=function(){return e},e}var h=s.a.textarea(l()),p=function(e){var n=e.value,t=e.placeholder,r=e.onChange;return Object(c.jsx)(h,{placeholder:t,value:n,onChange:r})},b=t(5),f=t.n(b),j=function(e){var n="very_long_input_id",t=f()("<button>!</button>");t.click((function(){var t=f()('<textarea id="'.concat(n,'">'));t.val(e),f()("body").append(t),t.focus(),t.select(),document.execCommand("copy")?alert("Everything is copied successfully"):alert("Something is very wrong")})),t.click(),f()("#".concat(n)).remove()},v=function(e,n){for(var t=e;t.length<n;)t="0"+t;return t};function m(){var e=Object(d.a)(["\n  border-radius: 4px;\n  border: solid 1px #333;\n  background: white;\n"]);return m=function(){return e},e}function x(){var e=Object(d.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 420px;\n  margin: 8px;\n  box-shadow: 0 1px 5px rgba(0, 0, 0, .3), 0 3px 30px rgba(0, 0, 0, .3);\n  border-radius: 6px;\n  padding: 32px;\n"]);return x=function(){return e},e}function g(){var e=Object(d.a)(["\n  font-size: 32px;\n  font-weight: bold;\n  margin: 12px auto 20px;\n"]);return g=function(){return e},e}function O(){var e=Object(d.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: start;\n  flex-wrap: wrap;\n"]);return O=function(){return e},e}function y(){var e=Object(d.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  margin: 0 auto;\n"]);return y=function(){return e},e}var k=s.a.div(y()),w=s.a.div(O()),S=s.a.div(g()),C=s.a.div(x()),_=s.a.button(m()),$=function(){var e=Object(r.useState)(""),n=Object(u.a)(e,2),t=n[0],i=n[1],o=Object(r.useState)(null),a=Object(u.a)(o,2),d=a[0],s=a[1],l=Object(r.useState)(""),h=Object(u.a)(l,2),b=h[0],f=h[1],m=Object(r.useState)(null),x=Object(u.a)(m,2),g=x[0],O=x[1],y=Object(r.useState)(null),$=Object(u.a)(y,2),T=$[0],F=$[1],P=Object(r.useState)([]),I=Object(u.a)(P,2),N=I[0],D=I[1];return Object(c.jsxs)(k,{children:[Object(c.jsx)(S,{children:"Useful stuff"}),Object(c.jsxs)(w,{children:[Object(c.jsxs)(C,{children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("b",{children:"Step 1"}),": Copy and paste the .csv file contents into the text area and then press the Submit button to read the children data."]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("b",{children:"Status"}),": ",d?"Completed!":"Not completed"]}),Object(c.jsx)(p,{value:t,placeholder:"Paste the .csv file contents here",onChange:function(e){var n=e.target.value;i(n)}}),Object(c.jsx)(_,{type:"submit",onClick:function(){if(""!==t){var e=function(e){for(var n=e.split("\n").filter((function(e){return/^[0-9]+,.*$/.test(e)})).reduce((function(e,n){var t=n.split(","),c=t[1];return e.children.push(c),e.days.push(function(e){return function(e,n){for(var t=[],c=0;-1!==(c=e.indexOf(n,c+1));)t.push(c);return t}(e,"\u043d\u043d").map((function(e){return e-4}))}(t)),e}),{children:[],days:[]}),t=n.children,c=n.days,r={},i=function(e){var n=t[e];c[e].forEach((function(e){r[e]||(r[e]=[]),r[e].push(n)}))},o=0;o<t.length;++o)i(o);return{children:t,absentData:r}}(t);s(e)}else alert("The area you should have filled with the .csv data is empty. The fuck?")},children:"Submit"})]}),Object(c.jsxs)(C,{children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("b",{children:"Step 2"}),": Press the Get Function button to copy the code to your clipboard. Paste and execute the code on the page with the children list to get the data."]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("b",{children:"Status"}),": ",g?"Completed!":"Not completed"]}),Object(c.jsx)(_,{type:"button",onClick:function(){j("(function() {\n    const children = Array.from($('.j_tr')).slice(1, -1).map(row => {\n        const cells = Array.from($(row).children('td'))\n        const name = cells[1].innerText\n        const id = cells[2].getAttribute('child')\n\n        return {id, name}\n    }).reduce((res, child) => {\n        res[child.name + '_' + child.id] = child.id\n        return res\n    }, {})\n    \n    const groupId = $('#id_group')[0].value\n    const dou_id = $('[name=\"dou_id\"]')[0].value\n    const month = $('#id_period')[0].value\n    const year = $('#id_year')[0].value\n    \n    const data = {children, groupId, dou_id, month, year}\n\n    const copyToClipboard = (value) => {\n        const button = $('<button>!</button>')\n        button.click(() => {\n            const input = $('<input id=\"ultra_input\">')\n            input.val(value)\n\n            $('body').append(input)\n            input.focus()\n            input.select()\n\n            const res = document.execCommand('copy')\n            if (res) {\n                alert('Names and ids were copied successfully')\n            } else {\n                alert('Something went very wrong')\n            }\n\n        })\n        button.click()\n\n        $('#ultra_input').remove()\n    }\n    \n    copyToClipboard(JSON.stringify(data))\n})()")},children:"Get Function"}),Object(c.jsx)(p,{value:b,placeholder:"Paste the result of the function here",onChange:function(e){var n=e.target.value;f(n)}}),Object(c.jsx)(_,{type:"submit",onClick:function(){""!==b?O(JSON.parse(b)):alert("The area you should have filled with the scrapped children data is empty. The fuck?")},children:"Submit"})]}),Object(c.jsxs)(C,{children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("b",{children:"Step 3"}),": Map children from the .csv to the scrapped children from the web page."]}),N&&Object(c.jsxs)("div",{children:[Object(c.jsx)("b",{children:"Failed to match"}),": ",N.join(", ")]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("b",{children:"Status"}),": ",T?"Completed!":"Not completed"]}),Object(c.jsx)(_,{type:"submit",onClick:function(){if(g&&d){var e=function(e,n){for(var t=Object.keys(e),c=t.map((function(e){var n=e.match(/^(.+) .\. .\._.*$/);return n&&n[1]?n[1]:e})),r=n.map((function(e){return e.split(" ")[0]})).map((function(n){var r=c.indexOf(n);return-1===r?null:(c[r]="",e[t[r]])})),i=[],o=new Map,a=0;a<r.length;++a){var u=n[a],d=r[a];d?o.set(u,d):i.push(u)}return{failures:i,matchedIds:o}}(g.children,d.children),n=e.failures,t=e.matchedIds;F(t),D(n)}else alert("You should complete the first two steps before you are able to do that. The fuck are you thinking?")},children:"Submit"})]}),Object(c.jsxs)(C,{children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("b",{children:"Step 4"}),": Press the Get Function button to copy the code to your clipboard. Paste and execute the code on the page with the children list to set the data from the .csv."]}),Object(c.jsx)(_,{type:"button",onClick:function(){if(T){var e=new Map;for(var n in d.absentData)e.set(n,d.absentData[n].map((function(e){return T.get(e)})).filter((function(e){return!!e})));var t=function(e,n,t,c,r){var i="position: absolute;\n                        background: #FFC0CBaa;\n                        top: 0;\n                        bottom: 0;\n                        left: 0;\n                        right: 0;\n                        display: flex;\n                        justify-content: center;\n                        align-items: center;".split("\n").map((function(e){return e.trim()})).join(""),o="color: #fff;\n                        font-weight: bold;\n                        font-size: 26px;\n                        background: #3333;\n                        border-radius: 8px;\n                        padding: 4px;".split("\n").map((function(e){return e.trim()})).join(""),a=Array.from(e.keys()),u=a.map((function(i){var o=v(i,2),a=v(c,2),u="".concat(o,".").concat(a,".").concat(r),d=e.get(i);return"$.post('/cabinet/children/visit/save/?dou_id=".concat(t,"', {children: '").concat(d.join("|"),"', group: ").concat(n,", date: '").concat(u,"'}, function(data){\n            --completed\n            if (completed === 0) {\n                cover.remove()\n            }\n        });")})).join("\n");return"\ndocument.documentElement.scrollTop = 0\nlet cover = $('<div style=\"".concat(i,'"><div style="').concat(o,"\">\u0429\u0430, \u0449\u0430, \u043f\u043e\u0433\u043e\u0434\u0438.</div></div>')\n$('body').append(cover)\n        \nlet completed = ").concat(a.length,"\n").concat(u,"\n    ")}(e,g.groupId,g.dou_id,g.month,g.year);j(t)}else alert("No matched data. Did you do the steps 1-3? The fuck are you thinking?")},children:"Get Function"})]})]})]})},T=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,23)).then((function(n){var t=n.getCLS,c=n.getFID,r=n.getFCP,i=n.getLCP,o=n.getTTFB;t(e),c(e),r(e),i(e),o(e)}))};a.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)($,{})}),document.getElementById("root")),T()}},[[22,1,2]]]);
//# sourceMappingURL=main.955e86f3.chunk.js.map