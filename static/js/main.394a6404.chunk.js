(this["webpackJsonpkindergarten-helper"]=this["webpackJsonpkindergarten-helper"]||[]).push([[0],{19:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0),c=n.n(a),o=n(10),i=n.n(o),u=(n(19),n(4)),s=n(2),l=n(3);function d(){var e=Object(s.a)(["\n  resize: none;\n  width: 100%;\n  border: solid #333 1px;\n  border-radius: 4px;\n  padding: 4px;\n  height: 120px;\n  margin-top: 12px;\n"]);return d=function(){return e},e}var p=l.a.textarea(d()),h=function(e){var t=e.value,n=e.placeholder,a=e.onChange;return Object(r.jsx)(p,{placeholder:n,value:t,onChange:a})};function f(){var e=Object(s.a)(["\n  display: inline;\n  padding: 4px;\n  text-transform: lowercase;\n  border-radius: 8px;\n  border: "," 1px solid;\n  color: ",";\n"]);return f=function(){return e},e}var b=l.a.div(f(),(function(e){return e.color}),(function(e){return e.color})),j=function(e){var t=e.value,n=e.successLabel,a=e.failureLabel;return Object(r.jsx)(b,{color:t?"#39C700":"#C70039",children:t?n:a})};function v(){var e=Object(s.a)(["\n  display: inline;\n  font-weight: bold;\n"]);return v=function(){return e},e}function x(){var e=Object(s.a)(["\n  margin: 4px 0;\n"]);return x=function(){return e},e}function m(){var e=Object(s.a)(["\n  border-radius: 4px;\n  border: solid 1px #0039C7;\n  color: #0039C7;\n  background: white;\n  margin-top: 12px;\n  height: 40px;\n\n  &:hover {\n    background: #ccdaff;\n  }\n"]);return m=function(){return e},e}var g=l.a.button(m()),O=l.a.div(x()),y=l.a.div(v());function w(){var e=Object(s.a)(["\n  position: absolute;\n  width: 24px;\n  height: 24px;\n  border: none;\n  border-radius: 50%;\n  right: 16px;\n  top: 16px;\n  cursor: ",";\n  background: ","\n"]);return w=function(){return e},e}function C(){var e=Object(s.a)(["\n  display: flex;\n  position: relative;\n  flex-direction: column;\n  width: 420px;\n  margin: 8px;\n  box-shadow: 0 1px 5px rgba(0, 0, 0, .3), 0 3px 30px rgba(0, 0, 0, .3);\n  border-radius: 6px;\n  padding: 44px 32px 32px 32px;\n"]);return C=function(){return e},e}var k=l.a.div(C()),D=l.a.button(w(),(function(e){return e.enabled?"pointer":"default"}),(function(e){return e.enabled?"#FFC300":"#eee"})),S=function(e){var t=e.title,n=e.text,a=e.completed,c=e.onConfig,o=e.children;return Object(r.jsxs)(k,{children:[Object(r.jsx)(D,{enabled:!!c}),Object(r.jsxs)(O,{children:[Object(r.jsxs)(y,{children:[t,":"]})," ",n]}),void 0!==a&&Object(r.jsxs)(O,{children:[Object(r.jsx)(y,{children:"Status:"})," ",Object(r.jsx)(j,{value:a,successLabel:"Completed",failureLabel:"Not completed"})]}),o]})},F=function(e){var t=e.tableData,n=e.setTableData,a=e.rawCsv,o=e.setRawCsv;return Object(r.jsx)(S,{title:"Step 1",text:"Copy and paste the .csv file contents into the text area and then press the Submit button to read the children data.",completed:!!t,children:!t&&Object(r.jsxs)(c.a.Fragment,{children:[Object(r.jsx)(h,{value:a,placeholder:"Paste the .csv file contents here",onChange:function(e){o(e.target.value)}}),Object(r.jsx)(g,{type:"submit",onClick:function(){""!==a?n(function(e){var t=/^[0-9]+,[\u0430-\u044f\u0410-\u044f]+ [\u0430-\u044f\u0410-\u044f]+,.*$/,n=/^[\u0430-\u044f\u0410-\u044f]+ [\u0430-\u044f\u0410-\u044f]\. [\u0430-\u044f\u0410-\u044f]\.,.*$/,r=!0,a=e.split("\n").map((function(e){return e.trim()})),c=a.filter((function(e){return t.test(e)}));0===c.length&&(c=a.filter((function(e){return n.test(e)})),r=!1);for(var o=c.reduce((function(e,t){var n=t.split(","),a=n[r?1:0];return e.children.push(a),e.days.push(function(e,t){var n=t?4:3;return function(e,t){for(var n=[],r=0;-1!==(r=e.indexOf(t,r+1));)n.push(r);return n}(e,"\u043d\u043d").map((function(e){return e-n}))}(n,r)),e}),{children:[],days:[]}),i=o.children,u=o.days,s={},l=function(e){var t=i[e];u[e].forEach((function(e){s[e]||(s[e]=[]),s[e].push(t)}))},d=0;d<i.length;++d)l(d);return{children:i,absentData:s}}(a)):alert("The area you should have filled with the .csv data is empty. The fuck?")},children:"Submit"})]})})},$=n(5),_=n.n($),T=function(e){var t="very_long_input_id",n=_()("<button>!</button>");n.click((function(){var n=_()('<textarea id="'.concat(t,'">'));n.val(e),_()("body").append(n),n.focus(),n.select(),document.execCommand("copy")?alert("Everything is copied successfully"):alert("Something is very wrong")}));var r=document.documentElement.scrollTop;n.click(),_()("#".concat(t)).remove(),document.documentElement.scrollTop=r},M=function(e,t){for(var n=e;n.length<t;)n="0"+n;return n},P=function(e){var t=e.parsedData,n=e.setParsedData,a=e.scrapedData,o=e.setScrappedData;return Object(r.jsx)(S,{title:"Step 2",text:"Press the Get Function button to copy the code to your clipboard. Paste and execute the code on the page with the children list to get the data.",completed:!!t,children:!t&&Object(r.jsxs)(c.a.Fragment,{children:[Object(r.jsx)(g,{type:"button",onClick:function(){T("(function() {\n    const children = Array.from($('.j_tr')).slice(1, -1).map(row => {\n        const cells = Array.from($(row).children('td'))\n        const name = cells[1].innerText\n        const id = cells[2].getAttribute('child')\n\n        return {id, name}\n    }).reduce((res, child) => {\n        res[child.name + '_' + child.id] = child.id\n        return res\n    }, {})\n    \n    const groupId = $('#id_group')[0].value\n    const dou_id = $('[name=\"dou_id\"]')[0].value\n    const month = $('#id_period')[0].value\n    const year = $('#id_year')[0].value\n    \n    const data = {children, groupId, dou_id, month, year}\n\n    const copyToClipboard = (value) => {\n        const button = $('<button>!</button>')\n        button.click(() => {\n            const input = $('<input id=\"ultra_input\">')\n            input.val(value)\n\n            $('body').append(input)\n            input.focus()\n            input.select()\n\n            const res = document.execCommand('copy')\n            if (res) {\n                alert('Names and ids were copied successfully')\n            } else {\n                alert('Something went very wrong')\n            }\n\n        })\n        button.click()\n\n        $('#ultra_input').remove()\n    }\n    \n    copyToClipboard(JSON.stringify(data))\n})()")},children:"Get Function"}),Object(r.jsx)(h,{value:a,placeholder:"Paste the result of the function here",onChange:function(e){o(e.target.value)}}),Object(r.jsx)(g,{type:"submit",onClick:function(){""!==a?n(JSON.parse(a)):alert("The area you should have filled with the scrapped children data is empty. The fuck?")},children:"Submit"})]})})},I=function(e){var t=e.parsedData,n=e.tableData,a=e.failedMatches,c=e.successfulMatches,o=e.setSuccessfulMatches,i=e.setFailedMatches;return Object(r.jsxs)(S,{title:"Step 3",text:"Map children from the .csv to the scrapped children from the web page.",completed:!!c,children:[!!a.length&&Object(r.jsxs)(O,{children:[Object(r.jsx)(y,{children:"Failed to match"}),": ",a.join(", ")]}),!c&&Object(r.jsx)(g,{type:"submit",onClick:function(){if(t&&n){var e=function(e,t){for(var n=Object.keys(e),r=n.map((function(e){var t=e.match(/^(.+) .\. .\._.*$/);return t&&t[1]?t[1]:e})),a=t.map((function(e){return e.split(" ")[0]})).map((function(t){var a=r.indexOf(t);return-1===a?null:(r[a]="",e[n[a]])})),c=[],o=new Map,i=0;i<a.length;++i){var u=t[i],s=a[i];s?o.set(u,s):c.push(u)}return{failures:c,matchedIds:o}}(t.children,n.children),r=e.failures,a=e.matchedIds;o(a),i(r)}else alert("You should complete the first two steps before you are able to do that. The fuck are you thinking?")},children:"Submit"})]})},L=function(e){var t=e.parsedData,n=e.tableData,a=e.successfulMatches;return Object(r.jsx)(S,{title:"Step 4",text:"Press the Get Function button to copy the code to your clipboard. Paste and execute the code on the page with the children list to set the data from the .csv.",children:Object(r.jsx)(g,{type:"button",onClick:function(){if(a){var e=new Map;for(var r in n.absentData)e.set(r,n.absentData[r].map((function(e){return a.get(e)})).filter((function(e){return!!e})));var c=function(e,t,n,r,a){var c="position: fixed;\n                        background: #FFC0CBaa;\n                        top: 0;\n                        bottom: 0;\n                        left: 0;\n                        right: 0;\n                        display: flex;\n                        justify-content: center;\n                        align-items: center;".split("\n").map((function(e){return e.trim()})).join(""),o="color: #fff;\n                        font-weight: bold;\n                        font-size: 26px;\n                        background: #3333;\n                        border-radius: 8px;\n                        padding: 4px;".split("\n").map((function(e){return e.trim()})).join(""),i=Array.from(e.keys()),u=i.map((function(c){var o=M(c,2),i=M(r,2),u="".concat(o,".").concat(i,".").concat(a),s=e.get(c);return"$.post('/cabinet/children/visit/save/?dou_id=".concat(n,"', {children: '").concat(s.join("|"),"', group: ").concat(t,", date: '").concat(u,"'}, function(data){\n            --completed\n            if (completed === 0) {\n                cover.remove()\n            }\n        });")})).join("\n");return"\nlet completed = ".concat(i.length,"\n\nif (completed > 0) {\n\nlet cover = $('<div style=\"").concat(c,'"><div style="').concat(o,"\">\u0429\u0430, \u0449\u0430, \u043f\u043e\u0433\u043e\u0434\u0438.</div></div>')\n$('body').append(cover)\n\n").concat(u,"\n\n}\n    ")}(e,t.groupId,t.dou_id,t.month,t.year);T(c)}else alert("No matched data. Did you do the steps 1-3? The fuck are you thinking?")},children:"Get Function"})})};function E(){var e=Object(s.a)(["\n  font-size: 32px;\n  font-weight: bold;\n  margin: 12px auto 20px;\n"]);return E=function(){return e},e}function N(){var e=Object(s.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: start;\n  flex-wrap: wrap;\n"]);return N=function(){return e},e}function A(){var e=Object(s.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  margin: 0 auto;\n"]);return A=function(){return e},e}var G=l.a.div(A()),J=l.a.div(N()),z=l.a.div(E()),B=function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(null),i=Object(u.a)(o,2),s=i[0],l=i[1],d=Object(a.useState)(""),p=Object(u.a)(d,2),h=p[0],f=p[1],b=Object(a.useState)(null),j=Object(u.a)(b,2),v=j[0],x=j[1],m=Object(a.useState)(null),g=Object(u.a)(m,2),O=g[0],y=g[1],w=Object(a.useState)([]),C=Object(u.a)(w,2),k=C[0],D=C[1];return Object(r.jsxs)(G,{children:[Object(r.jsx)(z,{children:"Useful stuff"}),Object(r.jsxs)(J,{children:[Object(r.jsx)(F,{tableData:s,rawCsv:n,setTableData:l,setRawCsv:c}),Object(r.jsx)(P,{parsedData:v,scrapedData:h,setParsedData:x,setScrappedData:f}),Object(r.jsx)(I,{parsedData:v,tableData:s,failedMatches:k,successfulMatches:O,setSuccessfulMatches:y,setFailedMatches:D}),Object(r.jsx)(L,{parsedData:v,tableData:s,successfulMatches:O})]})]})},R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,23)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(B,{})}),document.getElementById("root")),R()}},[[22,1,2]]]);
//# sourceMappingURL=main.394a6404.chunk.js.map